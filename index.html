<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Bıyıklıfbı – Firebase Entegre</title>
  <style>
    :root {
      --bg-color: #0d0d0d;
      --text-color: #f0f0f0;
      --accent-color: #ffcc00;
      --section-bg: #1a1a1a;
      --input-bg: #1e1e1e;
      --border-color: #444;
      --footer-bg: #111;
    }
    [data-theme="light"] {
      --bg-color: #ffffff;
      --text-color: #000000;
      --accent-color: #cc9900;
      --section-bg: #f9f9f9;
      --input-bg: #f0f0f0;
      --border-color: #ccc;
      --footer-bg: #eee;
    }
    html { scroll-behavior: smooth; }
    body {
      background-color: var(--bg-color);
      color: var(--text-color);
      font-family: Arial, sans-serif;
      margin: 0; padding: 0;
    }
    header {
      text-align: center; padding: 2rem 1rem;
      background-color: var(--section-bg);
    }
    header img {
      width: 100px; border-radius: 12px;
    }
    h1 { margin-top: 1rem; color: var(--accent-color); }
    nav {
      display: flex; justify-content: center; gap: 1rem;
      background-color: var(--footer-bg); padding: 1rem;
    }
    nav a {
      color: var(--text-color); text-decoration: none;
      font-weight: bold; transition: transform 0.3s, color 0.3s;
    }
    nav a:hover {
      transform: scale(1.05); color: var(--accent-color);
    }
    #themeToggle {
      position: fixed; top: 1rem; right: 1rem;
      background: transparent;
      color: var(--text-color);
      border: 1px solid var(--border-color);
      padding: 0.6rem 1.2rem; border-radius: 12px;
      cursor: pointer; z-index: 1000;
      transition: background-color 0.3s, color 0.3s, border-color 0.3s;
    }
    #themeToggle:hover {
      background-color: var(--accent-color);
      color: var(--bg-color);
    }
    main { max-width: 700px; margin: auto; padding: 2rem; }
    section { margin-bottom: 2rem; }
    h2 { color: var(--accent-color); }
    input, textarea {
      width: 100%; padding: 0.75rem; background-color: var(--input-bg);
      border: 1px solid var(--border-color); color: var(--text-color);
      border-radius: 6px; margin-bottom: 1rem;
    }
    button {
      background-color: var(--accent-color); color: var(--bg-color);
      padding: 0.6rem 1.2rem; border: none; border-radius: 6px;
      cursor: pointer;
    }
    button:hover { background-color: #e6b800; }
    .yorum {
      background-color: var(--section-bg); padding: 1rem;
      margin-top: 1rem; border-left: 4px solid var(--border-color);
      border-radius: 6px;
    }
    .yorum .ad { font-weight: bold; }
    .yorum .tarih { font-size: 0.8rem; color: #aaa; }
    .yorum .aksiyonlar button {
      margin-right: 0.5rem; background: var(--input-bg);
      color: var(--text-color); border: 1px solid var(--border-color);
      border-radius: 4px; padding: 0.3rem 0.6rem;
    }
    /* Hakkımızda bölümü için eklenen stil */
    .hakkimizda-kutusu {
      background-color: var(--section-bg);
      padding: 1.5rem;
      border-radius: 8px;
      margin-bottom: 1rem;
      border: 1px solid var(--border-color);
    }
    .hakkimizda-kutusu h3 {
      color: var(--accent-color);
      margin-top: 0;
    }
    .yanit-kapsayici {
      margin-left: 20px;
      border-left: 2px solid var(--accent-color);
      padding-left: 10px;
      margin-top: 1rem;
    }
    .yanit-formu {
      margin-top: 1rem;
      padding-left: 20px;
    }
    footer {
      text-align: center; padding: 1rem;
      background-color: var(--footer-bg);
      color: var(--text-color);
    }
  </style>
</head>
<body data-theme="dark">
  <button id="themeToggle">🌙</button>
  <header>
    <img src="1000000755.jpg" alt="Bıyıklıfbı Logo" />
    <h1>Bıyıklıfbı</h1>
    <p>Yerli, bağımsız bilgi tartışma platformu</p>
  </header>
  <nav>
    <a href="#">Ana Sayfa</a>
    <a href="#tartismalar">Tartışmalar</a>
    <a href="#hakkimizda">Hakkımızda</a>
    <a href="#oyunlarimiz">Oyunlarımız</a>
  </nav>
  <main>
    <section>
      <h2>📚 Giriş</h2>
      <p>Burası Bıyıklıfbı'nın ana sayfası. Bu site, özgürce bilgi paylaşmak ve fikirleri tartışmak için kuruldu.</p>
    </section>
    <section id="tartismalar">
      <h2>💬 Tartışmalar</h2>
      <form id="anaYorumForm">
        <input type="text" id="kullaniciAdi" placeholder="Adınız" required />
        <textarea id="yorumMetni" rows="4" placeholder="Yorumunuzu yazın..." required></textarea>
        <button type="submit">Gönder</button>
      </form>
      <div id="yorumlar"></div>
    </section>
    <section id="hakkimizda">
      <h2>🎈 Hakkımızda</h2>
      <div class="hakkimizda-kutusu">
        <h3>Vizyonumuz</h3>
        <p>Bıyıklıfbı olarak vizyonumuz; bilginin ışığında eşitlik, adalet ve şeffaflık ilkeleriyle hareket eden bir topluluk oluşturmaktır. Amacımız, her görüşten insanın kendini güvende hissederek fikirlerini özgürce ifade edebileceği, yapıcı tartışmalarla kolektif bilincin yükseldiği bir dijital ortam yaratmaktır.</p>
      </div>
      <div class="hakkimizda-kutusu">
        <h3>Misyonumuz</h3>
        <p>Yerli ve bağımsız bir platform olarak, sansürsüz ve nitelikli bilgi akışını teşvik ediyoruz. Kullanıcılarımızın, etik kurallar çerçevesinde farklı bakış açılarını öğrenmelerini, kendi fikirlerini sorgulamalarını ve bilgiyi birlikte inşa etmelerini sağlamak en temel görevimizdir. Bıyıklıfbı, sadece bir platform değil, aynı zamanda düşünceye değer veren bir ailedir.</p>
      </div>
    </section>
  </main>
  
  <section id="oyunlarimiz" style="background-color: var(--section-bg); padding:2rem; text-align:center;">
    <h2 style="color:var(--accent-color); margin-bottom:1rem;">🕹️ Oyunlarımız</h2>
    <p>Yakında burada Bıyıklıfbı topluluğu için geliştirdiğimiz oyunları bulabilirsiniz!</p>
  </section>

  <section style="background-color: var(--footer-bg); padding:2rem; text-align:center;">
    <h2 style="color:var(--accent-color); margin-bottom:1rem;">📱 Bizi Takip Et</h2>
    <a href="https://www.instagram.com/biyiklifbi61" target="_blank"><button>📸 Instagram</button></a>
    <a href="https://sosyal.teknofest.app/@biyiklifbi61" target="_blank"><button>🌐 Teknofest</button></a>
    <a href="https://x.com/BIYIKLIFBI61" target="_blank"><button>🐦 X</button></a>
    <a href="https://youtube.com/@biyiklifbi6161" target="_blank"><button>▶️ YouTube</button></a>
  </section>

  <footer>© 2025 Bıyıklıfbı — Tüm hakları saklıdır.</footer>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-app.js";
    import { getDatabase, ref, push, onValue, remove, update } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-database.js";

    const firebaseConfig = {
      apiKey: "AIzaSyCNC1M0tgiKdV-YbE-zPrES2MP0oXN0xLU",
      authDomain: "byklfb-c85d8.firebaseapp.com",
      databaseURL: "https://byklfb-c85d8-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "byklfb-c85d8",
      storageBucket: "byklfb-c85d8.appspot.com",
      messagingSenderId: "115753196341",
      appId: "1:115753196341:web:53eda190794a6e4b7e4a7c",
      measurementId: "G-6GRY9LN4LE"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);
    const yorumRef = ref(db, "yorumlar");

    const yorumlarDiv = document.getElementById("yorumlar");

    // Yorumları çekme ve listeleme
    onValue(yorumRef, snapshot => {
      yorumlarDiv.innerHTML = "";
      const data = snapshot.val() || {};
      Object.entries(data).reverse().forEach(([key, item]) => {
        const yorumKapsayici = document.createElement("div");
        yorumKapsayici.className = "yorum";
        yorumKapsayici.innerHTML = `
          <div class="ad">${item.ad}</div>
          <div class="tarih">${item.tarih}</div>
          <div class="icerik">${item.yorum}</div>
          <div class="aksiyonlar">
            <button onclick="update(ref(db, 'yorumlar/' + '${key}'), { begen: ${item.begen || 0} + 1 })">👍 Beğen (${item.begen || 0})</button>
            <button class="yanitla-butonu" data-key="${key}" data-ad="${item.ad}">↩️ Yanıtla</button>
            <button onclick="remove(ref(db, 'yorumlar/' + '${key}'))">🗑 Sil</button>
          </div>
        `;
        
        const yanitFormDiv = document.createElement("div");
        yanitFormDiv.className = "yanit-formu";
        yanitFormDiv.style.display = "none";
        yanitFormDiv.innerHTML = `
          <input type="text" placeholder="Adınız" required />
          <textarea rows="2" placeholder="Yanıtınızı yazın..." required></textarea>
          <button class="yanit-gonder-butonu">Yanıtla</button>
          <button class="yanit-iptal-butonu">İptal</button>
        `;

        yorumKapsayici.appendChild(yanitFormDiv);

        if (item.yanitlar) {
            const yanitKapsayici = document.createElement("div");
            yanitKapsayici.className = "yanit-kapsayici";
            Object.entries(item.yanitlar).forEach(([yanitKey, yanitItem]) => {
                const yanitDiv = document.createElement("div");
                yanitDiv.className = "yorum";
                yanitDiv.innerHTML = `
                    <div class="ad">${yanitItem.ad}</div>
                    <div class="tarih">${yanitItem.tarih}</div>
                    <div class="icerik">${yanitItem.yorum}</div>
                `;
                yanitKapsayici.appendChild(yanitDiv);
            });
            yorumKapsayici.appendChild(yanitKapsayici);
        }
        yorumlarDiv.appendChild(yorumKapsayici);

        yorumKapsayici.querySelector(".yanitla-butonu").addEventListener("click", () => {
            yanitFormDiv.style.display = "block";
            yanitFormDiv.querySelector("textarea").focus();
        });
        yorumKapsayici.querySelector(".yanit-iptal-butonu").addEventListener("click", () => {
            yanitFormDiv.style.display = "none";
            yanitFormDiv.querySelector("input").value = "";
            yanitFormDiv.querySelector("textarea").value = "";
        });
        yorumKapsayici.querySelector(".yanit-gonder-butonu").addEventListener("click", () => {
            const ad = yanitFormDiv.querySelector("input").value.trim();
            const yanitMetni = yanitFormDiv.querySelector("textarea").value.trim();
            const tarih = new Date().toLocaleString("tr-TR");

            if (ad && yanitMetni) {
                const yanitRef = ref(db, `yorumlar/${key}/yanitlar`);
                push(yanitRef, { ad, yorum: yanitMetni, tarih });
                yanitFormDiv.style.display = "none";
                yanitFormDiv.querySelector("input").value = "";
                yanitFormDiv.querySelector("textarea").value = "";
            }
        });

      });
    });

    document.getElementById("anaYorumForm").addEventListener("submit", e => {
      e.preventDefault();
      const ad = document.getElementById("kullaniciAdi").value.trim();
      const yorum = document.getElementById("yorumMetni").value.trim();
      const tarih = new Date().toLocaleString("tr-TR");
      if (ad && yorum) {
        push(yorumRef, { ad, yorum, tarih, begen: 0 });
        e.target.reset();
      }
    });

  </script>

  <script>
    const themeToggle = document.getElementById("themeToggle");
    themeToggle.addEventListener("click", () => {
      const next = document.body.getAttribute("data-theme")==="light"?"dark":"light";
      document.body.setAttribute("data-theme", next);
      localStorage.setItem("tema", next);
      themeToggle.textContent = next==="light"?"🌙":"☀️";
    });
    document.addEventListener("DOMContentLoaded", () => {
      const t = localStorage.getItem("tema")||"dark";
      document.body.setAttribute("data-theme", t);
      themeToggle.textContent = t==="light"?"🌙":"☀️";
    });
  </script>
</body>
</html>
